{% extends 'core/base.html' %}
{% load static %}

{% block title %}Welcome{% endblock %}

{% block content %}
    <!-- Thể loại -->
    <div class="mt-6 px-6 py-6  rounded-xl">
        <h2 class="text-center text-3xl font-bold text-[#0FB3AF]">Thể loại</h2> 
        <p class="text-center pt-3 text-md text-[#3C3C3B] font-['Open Sans']">More then 10000 clients who are
            happy with Us. Are You Next One?</p>

        <div class="grid grid-row-2 gap-2 ">
            {% for categori in categories %} 
                <!-- href -> đi tới thể loại cụ thể -->
                <a href="#">
                    <!-- Tên thể loại -->
                    <p class="text-left text-2xl font-bold text-[#0FB3AF]">{{ categori.name }}</p>
                </a>

                <!-- Hiển thị boardgame -->
                <div class="grid grid-cols-3 gap-3 ">
                    {% for boardgame in boardgames %}
                        {% if boardgame.category.name == categori.name %}
                            <div class="shadow bg-[#ffffff] rounded-lg">
                                <!-- href -> đi tới boardgame cụ thể -->
                                <a href="#" >
                                    <!-- Hình ảnh boardgame -->
                                    <div >
                                        <img src="{{ boardgame.image.url }}" class="rounded-t-lg object-contain max-h-48 w-full transition " sizes="100vw">
                                    </div>
            
                                    <div class="p-6 rounded-b-xl bg-white-100">
                                        <!-- Thông tin boardgame -->
                                        <h2 class="text-xl font-bold">{{ boardgame.name }}</h2>
                                        <!-- <p class="text-gray-500">Tuổi: {{ boardgame.age_rating }}</p> -->
                                        <p class="text-gray-500">Thời gian: {{ boardgame.play_time }} phút</p>
                                        <p class="text-gray-500">Số lượng người chơi: {{ boardgame.people }} người</p>
                                        <!--Số sao-->
                                        {% for boardgame_rating in boardgame_ratings %}
                                            {% if boardgame.name == boardgame_rating.boardgame.name%} 
                                                <div class="flex items-center pt-1">
                                                    <div class="text-[#0FB3AF] text-2xl font-medium pr-2 ">
                                                        {{ boardgame_rating.average_stars }}
                                                    </div>                                            
                                                    
                                                    {% for star in boardgame_rating.draw_average_stars %}
                                                        <svg aria-hidden="true" class="w-5 h-5 text-[#0FB3AF]" fill="currentColor" viewBox="0 0 20 20">
                                                            <title> {{star}}</title>
                                                            <path
                                                                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z">
                                                            </path>
                                                        </svg>
                                                    {% endfor %}  
                                                    
                                                    {% for non_star in boardgame_rating.draw_non_stars %}
                                                        <svg aria-hidden="true" class="w-5 h-5 text-gray-300 " fill="currentColor" viewBox="0 0 20 20">
                                                            <path
                                                                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z">
                                                            </path>
                                                        </svg> 
                                                    {% endfor %} 
                                                </div>
                                            {% endif %} 
                                        {% endfor %}    
                                            
                                        <!-- Số lượt đánh giá-->
                                        {% for boardgame_rating in boardgame_ratings %}
                                            {% if boardgame.name == boardgame_rating.boardgame.name%} 
                                                <div class="font-thin text-[#7E7E7E] font-['Open Sans'] text-xs">
                                                    {{ boardgame_rating.total_comments }} Đánh giá
                                                </div>
                                            {% endif %} 
                                        {% endfor %}  

                                    </div>
                                </a>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>

            {% endfor %}

        </div>
        
        <div class=" grid  justify-items-center items-center pt-12 ">
            <!-- href -> đi tới trang tất cả thể loại -->
            <a  href="#"
                class="rounded-md h-10 border-2 border-primary px-6 py-2 text-xs font-bold bg-[#3C3C3B] text-white text-center hover:bg-[#3C3C3BCC] ">
                Xem tất cả
            </a>
        </div>

    </div> 
    
    <!-- Bảng xếp hạng -->
    <div>
        <div class="text-center pt-30 text-3xl font-bold text-[#0FB3AF] py-3">Bảng xếp hạng</div>
        {% for boardgame in top_boardgames %}
            {% for boardgame_rating in boardgame_ratings %}
                {% if boardgame.name == boardgame_rating.boardgame.name%}
                    <div class="relative ">
                        <a href="#">
                            <img class="rounded-t-lg object-contain h-80 w-3/4 object-center" src="{{ boardgame.image.url }}" alt="" />
                            
                            <div class=" absolute bottom-6 right-6 max-w-lg rounded-lg shadow bg-white-100 ">
                                <div class="flex items-center pt-1">
                                    <div class="text-[#0FB3AF] text-2xl font-medium pr-2 px-3">
                                        {{ boardgame_rating.average_stars }}
                                    </div>
                                    {% for star in boardgame_rating.draw_average_stars %}
                                        <svg aria-hidden="true" class="w-5 h-5 text-[#0FB3AF]" fill="currentColor" viewBox="0 0 20 20">
                                            <title> {{star}}</title>
                                            <path
                                                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z">
                                            </path>
                                        </svg>
                                    {% endfor %}  
                                
                                    {% for non_star in boardgame_rating.draw_non_stars %}
                                        <svg aria-hidden="true" class="w-5 h-5 text-gray-300 " fill="currentColor" viewBox="0 0 20 20">
                                            <path
                                                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z">
                                            </path>
                                        </svg> 
                                    {% endfor %} 
                                </div>
                                <div class="font-thin text-[#7E7E7E] font-['Open Sans'] text-xs px-3">
                                    {{ boardgame_rating.total_comments }} Đánh giá
                                </div>
                                <p class="text-[#3C3C3B] font-[Open Sans] text-l px-8 mt-3">{{ boardgame_rating.comment_content}}</p>
                                <table class="mt-3">
                                    <tbody>
                                        <tr>
                                            <td class="pl-4 ">
                                                <img class="w-10 h-10 rounded-full text-right" src="/src/images/avt2.png" alt="Rounded avatar">
                                            </td>
                                            <td >
                                                <p class="text-left bottom-3 text-[#3C3C3B]">{{ boardgame_rating.comment_author_name}}</p>
                                            </td>
                                            <td>
                                                <i class="fas fa-clock fa-lg text-[#727272] ">
                                            </td>
                                            <td class="text-xs text-[#727272] text-left font-[Open Sans] ">
                                                <p>{{ boardgame_rating.comment_date}}; {{ boardgame_rating.comment_time}}</p>
                                            </td>
                                            <td class=" w-1/4">
                                                <a  href="#"
                                                    class="rounded-md h-10 w-28 border-primary px-6 py-2 text-sm font-semibold bg-[#0FB3AF] text-white text-center hover:bg-[#0FB3AFCC]">
                                                    Read More
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div> 
                        </a> 
                    </div>
                {% endif %}
            {% endfor %}
        {% endfor %}

    </div>
    <!-- Quy tắc -->
    <div>
        <div class="text-center pt-30 text-3xl font-bold text-[#0FB3AF]">Quy tắc</div>
        <div class="grid grid-cols-4 gap-4 px-48 justify-items-center items-start pt-16">
            <div class="w-full grid justify-items-center">
                <img src="{% static 'Rule/1.png' %}" alt="">
                <p class="mt-8 font-[Open Sans] text-center">Each rental can only rent 1 boardgame</p>
            </div>
            <div class="w-full grid justify-items-center">
                <img src="{% static 'Rule/2.png' %}" alt="">
                <p class="mt-8 font-[Open Sans] text-center">Game rental will be equal to the sum of rent and deposit of
                    the selected game sets.</p>
            </div>
            <div class="w-full grid justify-items-center">
                <img src="{% static 'Rule/3.png' %}" alt="">
                <p class="mt-8 font-[Open Sans] text-center">Must return the boardgame on time</p>
            </div>
            <div class="w-full grid justify-items-center">
                <img src="{% static 'Rule/4.png' %}" alt="">
                <p class="mt-8 font-[Open Sans] text-center">Must be returned in the same condition as when delivered
                </p>
            </div>
        </div>
        <div class=" grid  justify-items-center items-center pt-12 ">
            <a  href="#"
                class="rounded-md h-10 border-2 border-primary px-6 py-2 text-xs font-bold bg-[#3C3C3B] text-white text-center hover:bg-[#3C3C3BCC] ">
                Xem tất cả
            </a>
        </div>
    </div>
{% endblock %}
